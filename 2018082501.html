<!-- build time:Sat May 16 2020 22:15:45 GMT+0800 (China Standard Time) --><!DOCTYPE html><html class="theme-next mist use-motion" lang="zh-Hans"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#222"><script src="/lib/pace/pace.min.js?v=1.0.2"></script><link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-240x240-playpi.png?v=5.1.3"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-playpi.png?v=5.1.3"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-playpi.png?v=5.1.3"><link rel="mask-icon" href="/images/logo-playpi.svg?v=5.1.3" color="#222"><meta name="keywords" content="Maven,JDK,证书"><link rel="alternate" href="/atom.xml" title="虾丸派" type="application/atom+xml"><meta name="description" content="在 Java 开发过程中，使用 Maven 往私服 deploy 构件【Java 打成的 jar 包】的时候，原本正常的流程突然出问题了，报错信息：1[WARNING] Could not transfer metadata org.leapframework:leap:0.4.0b-SNAPSHOT/maven-metadata.xml from/to bingo-maven-repositor"><meta name="keywords" content="Maven,JDK,证书"><meta property="og:type" content="article"><meta property="og:title" content="Maven 使用中遇到的证书问题以及 JDK8 问题"><meta property="og:url" content="https://www.playpi.org/2018082501.html"><meta property="og:site_name" content="虾丸派"><meta property="og:description" content="在 Java 开发过程中，使用 Maven 往私服 deploy 构件【Java 打成的 jar 包】的时候，原本正常的流程突然出问题了，报错信息：1[WARNING] Could not transfer metadata org.leapframework:leap:0.4.0b-SNAPSHOT/maven-metadata.xml from/to bingo-maven-repositor"><meta property="og:locale" content="zh-Hans"><meta property="og:image" content="https://raw.githubusercontent.com/iplaypi/img-playpi/master/img/old/b7f2e3a3gy1g1tan4wr2ij20cm0aqwel.jpg"><meta property="og:image" content="https://raw.githubusercontent.com/iplaypi/img-playpi/master/img/old/b7f2e3a3gy1g1taned34lj20d60i9wes.jpg"><meta property="og:image" content="https://raw.githubusercontent.com/iplaypi/img-playpi/master/img/old/b7f2e3a3gy1g1tanr9da2j20l40mjdgo.jpg"><meta property="og:image" content="https://raw.githubusercontent.com/iplaypi/img-playpi/master/img/old/b7f2e3a3gy1g1tasd88jdj20rt0ffab4.jpg"><meta property="og:image" content="https://raw.githubusercontent.com/iplaypi/img-playpi/master/img/old/b7f2e3a3gy1g1tay67elbj20qo0fqtfc.jpg"><meta property="og:image" content="https://raw.githubusercontent.com/iplaypi/img-playpi/master/img/old/b7f2e3a3gy1g1tb5tee2qj20qo0a1td9.jpg"><meta property="og:image" content="https://raw.githubusercontent.com/iplaypi/img-playpi/master/img/old/b7f2e3a3gy1g1tb6bm56gj20qo0fi0vd.jpg"><meta property="og:image" content="https://raw.githubusercontent.com/iplaypi/img-playpi/master/img/old/b7f2e3a3gy1g1tb6jiivhj20gj0ahaab.jpg"><meta property="og:image" content="https://raw.githubusercontent.com/iplaypi/img-playpi/master/img/old/b7f2e3a3gy1g1tb6u2gzgj20qo0awq7a.jpg"><meta property="og:updated_time" content="2019-04-04T15:06:32.000Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Maven 使用中遇到的证书问题以及 JDK8 问题"><meta name="twitter:description" content="在 Java 开发过程中，使用 Maven 往私服 deploy 构件【Java 打成的 jar 包】的时候，原本正常的流程突然出问题了，报错信息：1[WARNING] Could not transfer metadata org.leapframework:leap:0.4.0b-SNAPSHOT/maven-metadata.xml from/to bingo-maven-repositor"><meta name="twitter:image" content="https://raw.githubusercontent.com/iplaypi/img-playpi/master/img/old/b7f2e3a3gy1g1tan4wr2ij20cm0aqwel.jpg"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Mist",version:"5.1.3",sidebar:{position:"left",display:"hide",offset:12,b2t:!1,scrollpercent:!0,onmobile:!1},fancybox:!0,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},duoshuo:{userId:"0",author:"博主"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="https://www.playpi.org/2018082501.html"><title>Maven 使用中遇到的证书问题以及 JDK8 问题 | 虾丸派</title></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">虾丸派</span> <span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">烂笔头</h1></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于</a></li><li class="menu-item menu-item-books"><a href="/books/" rel="section"><i class="menu-item-icon fa fa-fw fa-book"></i><br>书籍</a></li><li class="menu-item menu-item-guide"><a href="/guide/" rel="section"><i class="menu-item-icon fa fa-fw fa-location-arrow"></i><br>指南</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i> </span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"><input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.playpi.org/2018082501.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="虾丸派"><meta itemprop="description" content="记录知识 | 分享技术"><meta itemprop="image" content="/images/favicon-1536x1536-playpi.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="虾丸派"></span><header class="post-header"><h2 class="post-title" itemprop="name headline">Maven 使用中遇到的证书问题以及 JDK8 问题</h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-25T23:06:32+08:00">2018-08-25 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/basic-technical-knowledge/" itemprop="url" rel="index"><span itemprop="name">基础技术知识</span> </a></span></span><span id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-divider">|</span> 阅读次数 <span id="busuanzi_value_page_pv"></span></span><div class="post-wordcount"><span class="post-meta-item-text">字数统计</span> <span title="字数统计">5,683字 </span><span class="post-meta-divider">|</span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span title="阅读时长">22分钟</span></div></div></header><div class="post-body" itemprop="articleBody"><p>在 Java 开发过程中，使用 Maven 往私服 deploy 构件【Java 打成的 jar 包】的时候，原本正常的流程突然出问题了，报错信息：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[WARNING] Could not transfer metadata org.leapframework:leap:0.4.0b-SNAPSHOT/maven-metadata.xml from/to bingo-maven-repository-hosted ($bingo.maven$): sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target</span><br></pre></td></tr></table></figure><p>看到里面的 <strong>security</strong> 和 <strong>certification</strong> 关键词就猜测是安全与证书的问题。恰好最近私服的域名访问从 http 升级为了 https，也就是增加了 SSL 证书，我想可能和这个有关。本文就记录解决这个问题的流程，以及后续由此又引发了其它的问题，例如 JDK8 导致的注解问题、IDEA 的乱码问题。</p><a id="more"></a><h1 id="问题出现"><a href="# 问题出现" class="headerlink" title="问题出现"></a>问题出现</h1><p>在分析问题现象之前，首先需要了解一个基本事实，Maven 是依赖于 JDK 环境运行的，所以使用 Maven 之前必须安装 JDK，并且配置好 <strong>JAVA_HOME</strong> 。在使用 Maven 过程中遇到的一些问题可能会和 JDK 环境有关，例如 SSL 证书问题、JDK 版本问题。</p><p>以下内容现象基于 Windoes7 X64 操作系统，JDK 版本为 1.7u89，Maven 版本为 3.5。</p><p>好，言归正传，继续关注遇到的问题。在某一天，发现公司的 Maven 私服仓库更新了管理系统，并且增加了 SSL 证书【证书类型是 <strong>Let’s Encrypt</strong> ，有效期三个月，这为后续的各种问题埋下了伏笔】，这样访问的链接全部变为 https 开头的了。但是我又注意到一个现象，我发现仓库里的很多 SNAPSHOT 类型的 jar 包消失了，这应该是管理系统设置了自动清除机制，把没用的快照版本的 jar 包全部清除，节约空间。但是，其中有一些 jar 包对于我来说是有用的，更麻烦的是这些 jar 包根本没有 RELEASE 正式版，都是前人留下的坑，为了图方便临时打了一个快照版本 jar 包给别人使用，竟然把资源文件也打进去，导致一个 jar 包有将近 100M 大小。这种操作显然是违背 Maven 的理念的，面对这种情况，再想申请发布一个 RELEASE 版本的 jar 包也麻烦，而且这种业务类型的代码就不应该打成 jar 包给别人使用。</p><p>思考了半天，我决定采用一个折中的办法：取得代码阅读权限，移除没用的资源文件，仅仅发布代码，仍旧发布 SNAPSHOT 版本，以后有时间再把业务代码复制出来，不再使用 jar 的形式。思路确定了，就开始行动。</p><p>一开始我发现开发环境本地仓库有这些 jar 包，还想手动上传到 Maven 私服仓库的，把坐标定义准确就行了。但是后续发现 Maven 私服仓库的管理系统不支持手动上传 jar 包，只支持通过账号、密码认证的方式，从源代码发布 jar 包到仓库，而且个人账号只能发布 SNAPSHOT 版本的，管理员账号才能发布 RELEASE 版本的。</p><p>路走到了这里，那我只能先获取项目代码的权限，然后新开分支，删掉无用的配置文件，仅仅发布源代码到私服仓库，先发布 SNAPSHOT 版本使用。</p><p>准备工作做好后，接着开始 deploy，就遇到了一连串的问题，在确认账号密码没有问题的前提下，deploy 失败，错误信息如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[WARNING] Could not transfer metadata org.leapframework:leap:0.4.0b-SNAPSHOT/maven-metadata.xml from/to bingo-maven-repository-hosted ($bingo.maven$): sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target</span><br></pre></td></tr></table></figure><p>看到里面的 <strong>security</strong> 和 <strong>certification</strong> 关键词就猜测是安全与证书的问题，公司私服的其它环境并没有变化，只能从 SSL 证书入手解决问题，然而一开始没有头绪。 但是又问了同事，发现他们可以正常 deploy，又测试了一下线上的发布系统，也可以正常发布 jar 包到公司私服仓库。那只有 2 个怀疑方向了，一个是本地 Maven 的版本问题，一个是本地 JDK 的版本问题。后来通过对比发现，的确是 JDK 版本的问题，某些低版本的 JDK 不会自动导入 Let’s Encrypt 的证书，才会导致 Maven 进行 deploy 时认证失败【Maven 底层是依赖于 JDK 的】，自然而然 delpoy 也就失败了。</p><p>参考：<a href="https://stackoverflow.com/questions/34110426/does-java-support-lets-encrypt-certificates" target="_blank" rel="noopener">stackoverflow 讨论一例 </a>。</p><blockquote><p>The Let’s Encrypt certificate is just a regular public key certificate. Java supports it (according to <a href="https://letsencrypt.org/docs/certificate-compatibility/" target="_blank" rel="noopener">Let’s Encrypt Certificate Compatibility</a> , for Java 7 &gt;= 7u111 and Java 8 &gt;= 8u101).</p></blockquote><p>在找原因的过程中还一度怀疑是公司私服仓库的 SSL 证书问题，后面发现是本地环境的问题，但是背后的根本原因还是 SSL 证书的问题。恰好遇到了 Let’s Encrypt 类型的证书，又恰好 JDK 版本过低，引起一系列连锁反应。</p><h1 id="问题解决"><a href="# 问题解决" class="headerlink" title="问题解决"></a>问题解决</h1><p>既然找到了问题，那就容易解决了，直接升级 JDK 即可，JDK7 需要升级到 &gt;=7u111，JDK8 需要升级到 &gt;=8u101。</p><h2 id="手动导入证书"><a href="# 手动导入证书" class="headerlink" title="手动导入证书"></a>手动导入证书</h2><p>其实，如果不升级 JDK，还有一种繁琐的解决办法，那就是手动导入证书。解决思路就是从需要访问的 https 站点下载证书，然后导入本地的 Java 环境证书库，缺点就是每次证书更新都需要重新导入，显得麻烦。其实这种做法更有助于我们理解这个问题的核心所在，高版本的 JDK 会自动帮我们导入 Let’s Encrypt 证书，但是低版本的不会，我们不仅能知其然，也知其所以然。</p><h3 id="下载证书"><a href="# 下载证书" class="headerlink" title="下载证书"></a>下载证书</h3><p>证书可以在访问网站时，在 url 文本框的左侧，有一把小绿锁，选中点击，接着查看证书，下载即可。</p><p>点击小绿锁<br><img src="https://raw.githubusercontent.com/iplaypi/img-playpi/master/img/old/b7f2e3a3gy1g1tan4wr2ij20cm0aqwel.jpg" alt="点击小绿锁" title="点击小绿锁"></p><p>下载证书<br><img src="https://raw.githubusercontent.com/iplaypi/img-playpi/master/img/old/b7f2e3a3gy1g1taned34lj20d60i9wes.jpg" alt="下载证书" title="下载证书"></p><p>此外也可以通过浏览器调试工具的 Security 标签查看下载证书，下图是使用 Chrome 浏览器的效果，其它浏览器可能会略有不同。<br><img src="https://raw.githubusercontent.com/iplaypi/img-playpi/master/img/old/b7f2e3a3gy1g1tanr9da2j20l40mjdgo.jpg" alt="浏览器调试工具的 Security 标签" title="浏览器调试工具的 Security 标签"></p><h3 id="把证书文件导入证书库"><a href="# 把证书文件导入证书库" class="headerlink" title="把证书文件导入证书库"></a>把证书文件导入证书库</h3><p>先要清楚本地 Java 的证书库的位置，一般在 <strong>{JAVA_HOME}/jre/lib/security/</strong> 目录下面，里面有一个 <strong>cacerts</strong> 文件，它就是所有证书的集合组成的文件。另外还要清楚 <strong>keytool</strong> 工具，它是 JDK 提供的可以操作证书的工具，可以直接使用。</p><p>Java 证书库的位置<br><img src="https://raw.githubusercontent.com/iplaypi/img-playpi/master/img/old/b7f2e3a3gy1g1tasd88jdj20rt0ffab4.jpg" alt="Java 证书库的位置" title="Java 证书库的位置"></p><p>以下命令供参考，特别需要注意 <strong>命令执行权限 </strong>、<strong> 文件写权限 </strong>：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-- 把证书文件 maven.datastory.cer 导入 Java 证书库 cacerts 中，别名为 maven.datastory，密码是 changeit</span><br><span class="line">keytool -import -alias maven.datastory -keystore cacerts -file  maven.datastory.cer -trustcacerts -storepass changeit</span><br><span class="line"></span><br><span class="line">-- 在证书库中查看指定别名的证书信息，需要输入密码 </span><br><span class="line">keytool -list -keystore cacerts -alias maven.datastory</span><br><span class="line"></span><br><span class="line">-- 删除证书库中指定别名的证书 </span><br><span class="line">keytool -delete -keystore cacerts -alias maven.datastory</span><br></pre></td></tr></table></figure><h3 id="后续维护问题"><a href="# 后续维护问题" class="headerlink" title="后续维护问题"></a>后续维护问题</h3><p>这种手动导入证书的方式，只能确保一时可以使用，因为证书是会过期的，特别是 Let’s Encrypt 证书，有效期只有 3 个月。所以后期维护起来会很麻烦，如果某一天发现 deploy 又报一样的错，那估计是证书过期了，也有可能是站点的证书被更换了。因此，还是升级高版本的 JDK 比较好，把证书的维护更新工作都交给 JDK 来执行，自己安心写代码就行了。</p><p>我后期就经历了这一过程，用了没多久发现 deploy 还是失败，只好把证书下载下来重复了导入的过程。而且一开始没有往证书过期上面怀疑，浪费了一些找问题的时间。</p><h2 id="自定义证书库"><a href="# 自定义证书库" class="headerlink" title="自定义证书库"></a>自定义证书库</h2><p>其实还有一种更为繁琐的做法，那就是自定义证书库，思路就是把 Java 的证书库复制一份，并且把自己的证书添加进去，然后为 Maven 指定这个自己的证书库。指定证书库的参数【例如路径、密码、证书库类型】需要在 Maven 命令执行之前配置，就像设置一些环境变量一样。</p><p>更为详细的做法就不演示了，毕竟一般都没有必要这样做，可以参考：<a href="http://kael-aiur.com/% E5% B7% A5% E5%85% B7% E4% BD% BF% E7%94% A8/maven% E6% B7% BB% E5%8A% A0% E4% BF% A1% E4% BB% BB% E8% AF%81% E4% B9% A6.html" target="_blank" rel="noopener">自定义 Maven 证书库 </a>。</p><h2 id="题外话"><a href="# 题外话" class="headerlink" title="题外话"></a> 题外话</h2><p>如果 IDEA 因为 Maven 的依赖问题，有红色的线条提醒，可能是没有及时更新 UI 界面导致的，其实依赖都完整了，此时重新启动 IDEA 即可，我一直怀疑这是 IDEA 的 bug，有时候明明缺少依赖，IDEA 也不提示错误。</p><p>而判断是否真的缺失 Maven 依赖，应该使用 Maven 命令编译、打包【mvn compile package】，看看日志是否正常，不能以 IDEA 的显示为依据【有时候 IDEA 会抽风】。如果真的缺少 Maven 依赖，使用 Maven 命令编译、打包是会失败的，并且有提示。而如果明明不缺少依赖，但是代码中报错一大堆，此时强制更新【reimport 重新导入】 Maven 依赖即可，必要时也需要重启 IDEA。</p><p>另外有一个很好用的小技巧，如果本地仓库存在一个可以使用的 jar 包，可以直接复制给别人使用，按照相同的目录放在指定的路径下面即可，这样 Maven 就会认为本地已经存在 jar 包了，不再去私服仓库下载。这种做法虽然很低级，但是却实用，可以快速解决私服仓库没有 jar 包，初始化环境时无法下载依赖的情况。</p><h2 id="其它问题记录"><a href="# 其它问题记录" class="headerlink" title="其它问题记录"></a>其它问题记录</h2><p>在同一时期，同事的环境已经升级到 <code>JDK8</code> 以上，并且 <code>&gt;=8u101</code>，<code>Maven</code> 版本是 <code>v3.2.1</code>，可以正常 <code>deploy</code> 构件。但是突然有一天就出错，从日志来看是认证问题，切换为别人的账号密码就正常，使用他自己的账号密码却报错，我猜测是账号的问题，找运维解决。</p><p>报错信息如下，留意关键部分：<code>Not authorized , ReasonPhrase:Unauthorized.</code>：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[INFO] --- maven-install-plugin:2.4:install (default-install) @ project-name ---</span><br><span class="line">[INFO] Installing D:\datastory\workspace\study\project-name\target\project-name-1.1.11-SNAPSHOT.jar to D:\pro\env\maven\repository\com\datastory\radar\project-name\1.1.11-SNAPSHOT\project-name-1.1.11-SNAPSHOT.jar</span><br><span class="line">[INFO] Installing D:\datastory\workspace\study\project-name\pom.xml to D:\pro\env\maven\repository\com\datastory\radar\project-name\1.1.11-SNAPSHOT\project-name-1.1.11-SNAPSHOT.pom</span><br><span class="line">[INFO] </span><br><span class="line">[INFO] --- maven-deploy-plugin:2.7:deploy (default-deploy) @ project-name ---</span><br><span class="line">Downloading: http://maven.domain/nexus/content/repositories/snapshots/com/datastory/radar/project-name/1.1.11-SNAPSHOT/maven-metadata.xml</span><br><span class="line">[WARNING] Could not transfer metadata com.datastory.radar:project-name:1.1.11-SNAPSHOT/maven-metadata.xml from/to snapshots (http://maven.domain/nexus/content/repositories/snapshots): Not authorized , ReasonPhrase:Unauthorized.</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD FAILURE</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time: 5.860 s</span><br><span class="line">[INFO] Finished at: 2018-08-10T21:48:24+08:00</span><br><span class="line">[INFO] Final Memory: 24M/326M</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[ERROR] Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.7:deploy (default-deploy) on project project-name: Failed to retrieve remote metadata com.datastory.radar:project-name:1.1.11-SNAPSHOT/maven-metadata.xml: Could not transfer metadata com.datastory.radar:project-name:1.1.11-SNAPSHOT/maven-metadata.xml from/to snapshots (http://maven.domain/nexus/content/repositories/snapshots): Not authorized , ReasonPhrase:Unauthorized. -&gt; [Help 1]</span><br><span class="line">[ERROR] </span><br><span class="line">[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.</span><br><span class="line">[ERROR] Re-run Maven using the -X switch to enable full debug logging.</span><br><span class="line">[ERROR] </span><br><span class="line">[ERROR] For more information about the errors and possible solutions, please read the following articles:</span><br><span class="line">[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException</span><br></pre></td></tr></table></figure><p><code>Not authorized , ReasonPhrase:Unauthorized.</code> 这个错误表明认证失败，说明远程仓库【或者私服】没有开放访问权限，需要密钥、用户名密码之类的认证方式。</p><p>我检查了一下我的 <code>settings.xml</code> 配置文件，发现已经配置好了 <code>server</code> 属性，并且确保了 <code>id</code> 与 项目 <code>pom.xml</code> 中指定仓库的 <code>id</code> 一致。但是还是出现异常，感觉上 <code>Maven</code> 使用的配置文件就不是我的这份，查看 <code>MAVEN_HOME</code> 也没有指定。</p><p>询问了一下运维人员，果然是的，服务器执行 <code>mvn</code> 相关命令，默认使用公共的配置文件【没有认证信息】，如果需要使用自己的配置文件【有自己特有的配置信息】，使用 <code>-s</code> 参数指定即可。如果需要经常使用，可以在 <code>.bashrc</code> 脚本中加上 <code>alias</code>：<code>alias mcp=&#39;mvn -s&quot;/path/to/your/settings.xml&quot;clean package&#39;</code>，这样每次登录时都会自动设置别名命令。</p><h1 id="JDK8- 注解问题"><a href="#JDK8- 注解问题" class="headerlink" title="JDK8 注解问题"></a>JDK8 注解问题</h1><p>切换到 <code>JDK8</code> 并且升级之后，在 <code>deploy</code> 构件到私服仓库的时候，出现了另外一个问题，直接 <code>deploy</code> 失败，报错信息如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Failed to execute goal org.apache.maven.plugins:maven-javadoc-plugin:2.7:jar (attach-javadocs) on project [projectname]: MavenReportException: Error while generating Javadoc:</span><br><span class="line">Exit code: 1 - [path-to-file]:[linenumber]: warning: no description for @param</span><br></pre></td></tr></table></figure><p><code>deploy</code> 失败日志截图</p><p><img src="https://raw.githubusercontent.com/iplaypi/img-playpi/master/img/old/b7f2e3a3gy1g1tay67elbj20qo0fqtfc.jpg" alt="deploy 失败日志截图" title="deploy 失败日志截图"></p><p>查看里面的关键信息，可以找出 <code>maven-javadoc-plugin</code> 这个插件，说明是这个插件在生成 <code>Javadoc</code> 的时候出问题了。而我回想了一下，最近的插件版本、代码结构并没有变化，唯一变化的就是开发环境，<code>JDK</code> 由 1.7 版本切换为了 1.8 版本，那就往这方面找问题了。</p><p>查了一下资料，由于 <code>JDK8</code> 的 <code>Javadoc</code> 生成机制比之前的版本要严谨许多，在 <code>Javadoc</code> 中添加了 <code>doclint</code>，而这个工具的主要目的是获得符合 <code>W3C HTML 4.01</code> 标准规范的 <code>HTML</code> 文档。所以使用 <code>maven-javadoc-plugin</code> 插件 <code>deploy</code> 的时候，<code>JDK8</code> 环境触发了 <code>Javadoc</code> 验证，验证自然不能通过，<code>Maven</code> 插件直接报错，<code>deploy</code> 不成功。</p><p>为了验证这个过程，我又把本地环境的 <code>JDK</code> 切回到了 1.7 版本，可以正常 <code>deploy</code>，成功发布 <code>SNAPSHOT</code> 版本的构件到私服仓库。而由于线上发布系统的 <code>JDK</code> 版本强制设置为了 1.8，无法更改，所以无法在线上做验证，只能发现在线上发布的 <code>RELEASE</code> 版本构件一定是失败的。</p><p>既然找到了原因所在，接下来就容易操作了，可以选择关闭 <code>Javadoc</code> 验证，或者直接不使用 <code>maven-javadoc-plugin</code> 这个插件。而我选择继续使用这个插件，但是可以选择是跳过生成 <code>Javadoc</code> 还是关闭 <code>Javadoc</code> 验证，根据自己的需要了，具体步骤与效果我会在下面演示。</p><p>先来看一下这个插件的 <code>pom.xml</code> 文件配置：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- javadoc 打包插件 --&gt;</span><br><span class="line">&lt;plugin&gt;</span><br><span class="line">    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;maven-javadoc-plugin&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;2.9&lt;/version&gt;</span><br><span class="line">    &lt;executions&gt;</span><br><span class="line">        &lt;execution&gt;</span><br><span class="line">            &lt;id&gt;attach-javadocs&lt;/id&gt;</span><br><span class="line">            &lt;goals&gt;</span><br><span class="line">                &lt;goal&gt;jar&lt;/goal&gt;</span><br><span class="line">            &lt;/goals&gt;</span><br><span class="line">            &lt;configuration&gt;</span><br><span class="line">                &lt;!-- 直接跳过 Javadoc 生成 --&gt;</span><br><span class="line">                &lt;skip&gt;true&lt;/skip&gt;</span><br><span class="line">                &lt;encoding&gt;UTF-8&lt;/encoding&gt;</span><br><span class="line">                &lt;charset&gt;UTF-8&lt;/charset&gt;</span><br><span class="line">                &lt;!-- 此参数针对 jdk8 环境使用，如果本机是 jdk7 环境会报错，所以增加上述 skip 配置，保证线上和本地都可以部署 (install/deploy), 当然最好使用 profile 激活灵活的配置 --&gt;</span><br><span class="line">                &lt;!-- add this to disable checking, 禁用 Javadoc 检查 --&gt;</span><br><span class="line">                &lt;additionalparam&gt;-Xdoclint:none&lt;/additionalparam&gt;</span><br><span class="line">                &lt;!-- 使用 profile 激活灵活的配置 --&gt;</span><br><span class="line">                &lt;additionalparam&gt;$&#123;javadoc.opts&#125;&lt;/additionalparam&gt;</span><br><span class="line">            &lt;/configuration&gt;</span><br><span class="line">        &lt;/execution&gt;</span><br><span class="line">    &lt;/executions&gt;</span><br><span class="line">&lt;/plugin&gt;</span><br></pre></td></tr></table></figure><p>以上配置是非常完整的，把所有的重要配置项都列出来了，并给出了注释，实际使用中选择自己需要的即可，如果看不懂没有关系，接着往下看，详细解释了参数的使用以及最终的优化配置方案。</p><p>在这里需要注意一个问题，如果你的 <code>pom.xml</code> 文件中根本没有配置 <code>maven-javadoc-plugin</code> 插件，但是这些错误仍旧存在，那是为什么呢？其实是因为 <code>Maven</code> 已经默认给每个生命周期都绑定了对应的插件，如果没有在 <code>pom.xml</code> 中配置自定义的插件，则使用 <code>Maven</code> 默认的【这里的默认有 2 层意思，一个是插件类型默认，一个是版本号默认】。例如当前项目如果没有配置 <code>javadoc</code> 插件，则会默认使用仓库里版本最高的稳定版 <code>maven-javadoc-plugin</code> 插件，插件的配置也都是默认的，无法更改。</p><p>而使用 <code>Maven</code> 默认的插件，很可能会引发莫名的问题，根本原因就在于对于某个插件、某个版本的插件、插件的默认配置，我们都是未知的，出了问题也比较难定位，所以在一些重要的插件上面还是手动显式配置出来比较好，这样问题都能在自己的掌握之中。</p><h2 id="跳过 -Javadoc- 的生成"><a href="# 跳过 -Javadoc- 的生成" class="headerlink" title="跳过 Javadoc 的生成"></a>跳过 Javadoc 的生成</h2><p>如果直接配置了跳过 <code>Javadoc</code> 的生成【使用 <code>skip</code> 参数】，<code>configuration</code> 下面的内容都不需要配置了，配置了也不会用到。由于插件会直接跳过 <code>Javadoc</code> 的生成，所以也就不存在验证的过程了。然而，这种做法对于构件的使用方是不友好的，因为缺失了 <code>Javadoc</code>，当查看源码遇到问题时就无法寻求有效的帮助了。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;skip&gt;true&lt;/skip&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure><h2 id="开启 -Javadoc- 生成但是关闭 -Javadoc- 验证"><a href="# 开启 -Javadoc- 生成但是关闭 -Javadoc- 验证" class="headerlink" title="开启 Javadoc 生成但是关闭 Javadoc 验证"></a>开启 Javadoc 生成但是关闭 Javadoc 验证</h2><p>因此，还是要开启 <code>Javadoc</code> 的生成，但是关闭 <code>JDK8</code> 对于 <code>Javadoc</code> 的严格验证，此时需要在 <code>configuration</code> 里面增加参数：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;additionalparam&gt;-Xdoclint:none&lt;/additionalparam&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure><p>一般为了方便他人查看项目的参数，最好把这种重要的参数值设置为全局变量，在 <code>pom.xml</code> 文件的 <code>properties</code> 节点下面声明即可，例如：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- 设置全局变量 </span><br><span class="line">&lt;properties&gt;</span><br><span class="line">    &lt;additionalparam.val&gt;-Xdoclint:none&lt;/additionalparam.val&gt;</span><br><span class="line">&lt;/properties&gt;</span><br><span class="line"></span><br><span class="line">-- 使用全局变量 </span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;additionalparam&gt;$&#123;additionalparam.val&#125;&lt;/additionalparam&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure><h2 id="潜在的问题"><a href="# 潜在的问题" class="headerlink" title="潜在的问题"></a>潜在的问题</h2><p>难道这样配置就完了吗，显然有潜在的问题，作为经历过的人，我告诉你，附加参数 <code>-Xdoclint:none</code> 是只有 <code>JDK8</code> 及以上版本才会支持的，如果有人在构建项目时使用了 <code>JDK7</code> 的环境，最终的结果还是失败，失败的原因是参数不合法，无法支持。</p><p>报错信息举例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Failed to execute goal org.apache.maven.plugins:maven-javadoc-plugin:2.7:jar (attach-javadocs) on project [projectname]: MavenReportException: Error while generating Javadoc:</span><br><span class="line">Exit code: 1 - javadoc: 错误 - 无效的标记: -Xdoclint:none</span><br></pre></td></tr></table></figure><p>所以接下来还要想一个更好的办法，不仅能关闭 <code>Javadoc</code> 的验证，还要根据当前的实际 <code>JDK</code> 环境来自动切换参数的取值，这样就可以兼容所有的环境了。显然，没有什么比 <code>profile</code> 更适合这个情况了，配置一个 <code>profile</code> 激活信息，根据 <code>JDK</code> 的版本激活全局变量，参数值传入给 <code>additionalparam</code> 使用，比起上面的固定的全局变量，这种可变的全局变量更灵活。</p><p>详细配置如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">-- 全局变量 javadoc.opts 在 JDK8 及以上版本才激活 </span><br><span class="line">&lt;profiles&gt;</span><br><span class="line">  &lt;profile&gt;</span><br><span class="line">    &lt;id&gt;doclint-java8-disable&lt;/id&gt;</span><br><span class="line">    &lt;activation&gt;</span><br><span class="line">      &lt;jdk&gt;[1.8,)&lt;/jdk&gt;</span><br><span class="line">    &lt;/activation&gt;</span><br><span class="line">    &lt;properties&gt;</span><br><span class="line">      &lt;javadoc.opts&gt;-Xdoclint:none&lt;/javadoc.opts&gt;</span><br><span class="line">    &lt;/properties&gt;</span><br><span class="line">  &lt;/profile&gt;</span><br><span class="line">&lt;/profiles&gt;</span><br><span class="line"></span><br><span class="line">-- 使用激活的全局变量，如果没有激活则为空 </span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;additionalparam&gt;$&#123;javadoc.opts&#125;&lt;/additionalparam&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure><h2 id="插件版本的踩坑"><a href="# 插件版本的踩坑" class="headerlink" title="插件版本的踩坑"></a>插件版本的踩坑</h2><p>在解决问题的过程中还遇到了一个典型的问题，由插件版本引起。</p><p>一开始在项目的 <code>pom.xml</code> 文件中没有配置插件 <code>maven-javadoc-plugin</code> 的版本号，即 <code>version</code> 参数，导致项目使用的是公司私服仓库最新的版本：<code>v3.0.0</code>，而在这个版本中使用 <code>-Xdoclint:none</code> 关闭验证是无效的，不知道是插件本身的问题还是参数 <code>-Xdoclint:none</code> 对 3.0.0 版本的插件无效。后来指定版本为 2.9，就没有这个问题了。</p><p>由于一开始没有指定插件 <code>maven-javadoc-plugin</code> 的版本号，出错了也不知道为啥，在 <code>deploy</code> 的输出日志中看到使用的 <code>v3.0.0</code> 版本的插件，猜测可能和插件版本有关系，于是更换了版本，就没有问题了。因此这种重要的插件还是要手动指定自己认为稳定的版本，这样有问题也能在自己的掌握之中。</p><h2 id="参考"><a href="# 参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="http://www.locked.de/how-to-ignore-maven-javadoc-errors-in-java-8/" target="_blank" rel="noopener">在 JDK8 中禁用 Javadoc 验证</a></li><li><a href="https://stackoverflow.com/questions/27728733/javadoc-error-invalid-flag-xdoclintnone-when-i-use-java-7-but-it-works-i" target="_blank" rel="noopener">stackoverflow 中的问答一例</a></li></ul><h1 id="IDEA- 乱码问题"><a href="#IDEA- 乱码问题" class="headerlink" title="IDEA 乱码问题"></a>IDEA 乱码问题</h1><p>在解决上面的 <code>JDK8</code> 注解的问题过程中，遇到了一个乱码问题，系统环境是 <code>Windows7 X64</code>。当在 <code>JDK7</code> 的环境中配置了以下内容时：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;additionalparam&gt;-Xdoclint:none&lt;/additionalparam&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure><p>本意是想测试这个参数在 <code>JDK7</code> 环境中的效果【前面已经验证过在 <code>JDK8</code> 中是完美运行的】，发现报错了，但是错误信息是乱码的，导致看不出来错误信息是什么，也就没法解决问题。</p><p>在 <code>JDK7</code> 中 <code>deploy</code> 报错乱码</p><p><img src="https://raw.githubusercontent.com/iplaypi/img-playpi/master/img/old/b7f2e3a3gy1g1tb5tee2qj20qo0a1td9.jpg" alt="Maven 报错信息乱码" title="Maven 报错信息乱码"></p><p>其实，这只是 IDEA 的编码设置问题，更改一下编码就行了。在 <strong>setting –&gt; maven –&gt; rumnner –&gt; VMoptions</strong> ，添加参数：<strong>-Dfile.encoding=GB2312</strong> ，就可以正常输出了。当然，Windows 系统配置编码为 <strong>GBK</strong> 也行。</p><p><img src="https://raw.githubusercontent.com/iplaypi/img-playpi/master/img/old/b7f2e3a3gy1g1tb6bm56gj20qo0fi0vd.jpg" alt="设置 IDEA 的 Maven 编码" title="设置 IDEA 的 Maven 编码"></p><p>为什么要这么配置呢，因为 Maven 是依赖于当前系统的编码的，可以使用 <strong>mvn -version</strong> 命令查看编码的信息，查看 <strong>Default locale</strong> 那一项，可以看到是 <strong>GBK</strong>。</p><p><img src="https://raw.githubusercontent.com/iplaypi/img-playpi/master/img/old/b7f2e3a3gy1g1tb6jiivhj20gj0ahaab.jpg" alt="查看 Maven 的编码使用" title="查看 Maven 的编码使用"></p><p>配置完成后，报错信息正常显示</p><p><img src="https://raw.githubusercontent.com/iplaypi/img-playpi/master/img/old/b7f2e3a3gy1g1tb6u2gzgj20qo0awq7a.jpg" alt="报错信息正常显示" title="报错信息正常显示"></p><h1 id="问题总结"><a href="# 问题总结" class="headerlink" title="问题总结"></a> 问题总结</h1><p>1、通过手动导入证书的方式，一开始解决了问题，后来过了一段时间突然又不能使用，这时候我很是疑惑的。问了问同事却都能正常使用，我还以为是我的 Maven 的版本问题，换了 Maven 版本也不行，最后折腾了很久发现是私服域名的 SSL 证书失效了，再重新导入一份就行了。因为私服域名的 <strong>Let’s Encrypt</strong> 证书有效期只有三个月，所以每次证书续期或者更换的时候，都要手动重新导入，旧证书会自动失效。这样多麻烦，所以还是直接升级 JDK 比较好，一劳永逸。</p><p>2、在与同事的开发环境对比的过程中，仔细对比了 Maven 的版本和 JDK 的版本，发现都是 Maven 3.5 与 JDK1.7，但是别人能用我的就不能用，一度怀疑人生。最终才发现根本原因是没有对比小版本号，同样是 JDK1.7，没有 <strong>&gt;=7u111</strong> 也不行。</p><p>3、关于 Maven 的插件版本问题，切记要手动指定自己认为可靠的版本，不要让 Maven 使用仓库最新的稳定版本，哪怕的确是使用最新的版本，也要指明，确保出了问题自己可控，否则就像无头的苍蝇乱打乱撞。</p></div><div><div id="wechat_subscriber" style="display:block;padding:10px 0;margin:20px auto;width:100%;text-align:center"><img id="wechat_subscriber_qcode" src="/images/wechat-qr-personal.jpg" alt="虾丸派 wechat" style="width:200px;max-width:100%"><div>扫一扫添加博主，进技术交流群，共同学习进步</div></div></div><div><div style="padding:10px 0;margin:20px auto;width:90%;text-align:center"><div>永不止步</div><button id="rewardButton" disable="enable" onclick='var e=document.getElementById("QR");"none"===e.style.display?e.style.display="block":e.style.display="none"'><span>打赏</span></button><div id="QR" style="display:none"><div id="wechat" style="display:inline-block"><img id="wechat_qr" src="/images/wechat-pay-playpi.png" alt="虾丸派 微信支付"><p>微信支付</p></div></div></div></div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong> 虾丸派</li><li class="post-copyright-link"><strong>本文链接：</strong> <a href="https://www.playpi.org/2018082501.html" title="Maven 使用中遇到的证书问题以及 JDK8 问题">https://www.playpi.org/2018082501.html</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！</li></ul></div><footer class="post-footer"><div class="post-tags"><a href="/tags/Maven/" rel="tag"><i class="fa fa-tag"></i> Maven</a> <a href="/tags/JDK/" rel="tag"><i class="fa fa-tag"></i> JDK</a> <a href="/tags/certificate-chn/" rel="tag"><i class="fa fa-tag"></i> 证书</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2018071801.html" rel="next" title="微博 id mid 相互转换算法实现 - Python 版本"><i class="fa fa-chevron-left"></i> 微博 id mid 相互转换算法实现 - Python 版本</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/2018090101.html" rel="prev" title="在 IDEA 中管理 Java 项目的文件夹类型">在 IDEA 中管理 Java 项目的文件夹类型 <i class="fa fa-chevron-right"></i></a></div></div></footer></div></article><div class="post-spread"></div></div></div><div class="comments" id="comments"><div id="vcomments"></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">站点概览</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="/images/favicon-1536x1536-playpi.png" alt="虾丸派"><p class="site-author-name" itemprop="name">虾丸派</p><p class="site-description motion-element" itemprop="description">记录知识 | 分享技术</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">142</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/index.html"><span class="site-state-item-count">12</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/index.html"><span class="site-state-item-count">294</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/iplaypi" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i>GitHub</a> </span><span class="links-of-author-item"><a href="https://weibo.com/u/3086148515" target="_blank" title="微博"><i class="fa fa-fw fa-weibo"></i>微博</a> </span><span class="links-of-author-item"><a href="mailto:playpi@qq.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-envelope"></i>E-Mail</a></span></div><div class="cc-license motion-element" itemprop="license"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" target="_blank" rel="external nofollow"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a></div><div class="links-of-blogroll motion-element links-of-blogroll-inline"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-link"></i> 友情链接</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="https://github.com/iplaypi" title="GitHub" target="_blank" rel="external nofollow">GitHub</a></li><li class="links-of-blogroll-item"><a href="https://weibo.com/u/3086148515" title="Weibo" target="_blank" rel="external nofollow">Weibo</a></li><li class="links-of-blogroll-item"><a href="https://www.playpi.org" title="虾丸派" target="_blank" rel="external nofollow">虾丸派</a></li><li class="links-of-blogroll-item"><a href="https://www.playpi.org" title="playpi" target="_blank" rel="external nofollow">playpi</a></li><li class="links-of-blogroll-item"><a href="https://www.liaoxuefeng.com" title="廖雪峰" target="_blank" rel="external nofollow">廖雪峰</a></li><li class="links-of-blogroll-item"><a href="http://www.ruanyifeng.com" title="阮一峰" target="_blank" rel="external nofollow">阮一峰</a></li><li class="links-of-blogroll-item"><a href="https://travis-ci.org/iplaypi/iplaypi.github.io" title="travis-ci" target="_blank" rel="external nofollow">travis-ci</a></li><li class="links-of-blogroll-item"><a href="https://www.vultr.com/?ref=7861302-4F" title="Vultr" target="_blank" rel="external nofollow">Vultr</a></li></ul></div></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#问题出现"><span class="nav-number">1.</span> <span class="nav-text">问题出现</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#问题解决"><span class="nav-number">2.</span> <span class="nav-text">问题解决</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#手动导入证书"><span class="nav-number">2.1.</span> <span class="nav-text">手动导入证书</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#下载证书"><span class="nav-number">2.1.1.</span> <span class="nav-text">下载证书</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#把证书文件导入证书库"><span class="nav-number">2.1.2.</span> <span class="nav-text">把证书文件导入证书库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#后续维护问题"><span class="nav-number">2.1.3.</span> <span class="nav-text">后续维护问题</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#自定义证书库"><span class="nav-number">2.2.</span> <span class="nav-text">自定义证书库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#题外话"><span class="nav-number">2.3.</span> <span class="nav-text">题外话</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#其它问题记录"><span class="nav-number">2.4.</span> <span class="nav-text">其它问题记录</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#JDK8- 注解问题"><span class="nav-number">3.</span> <span class="nav-text">JDK8 注解问题</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#跳过 -Javadoc- 的生成"><span class="nav-number">3.1.</span> <span class="nav-text">跳过 Javadoc 的生成</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#开启 -Javadoc- 生成但是关闭 -Javadoc- 验证"><span class="nav-number">3.2.</span> <span class="nav-text">开启 Javadoc 生成但是关闭 Javadoc 验证</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#潜在的问题"><span class="nav-number">3.3.</span> <span class="nav-text">潜在的问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#插件版本的踩坑"><span class="nav-number">3.4.</span> <span class="nav-text">插件版本的踩坑</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#参考"><span class="nav-number">3.5.</span> <span class="nav-text">参考</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#IDEA- 乱码问题"><span class="nav-number">4.</span> <span class="nav-text">IDEA 乱码问题</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#问题总结"><span class="nav-number">5.</span> <span class="nav-text">问题总结</span></a></li></ol></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; 2016&ndash;<span itemprop="copyrightYear">2020</span> <span class="post-meta-divider">|</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">虾丸派</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-area-chart"></i> </span><span class="post-meta-item-text">全站字数统计</span> <span title="全站字数统计">320.5k 字</span></div><div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io" rel="external nofollow">Hexo</a> 强力驱动</div><span class="post-meta-divider">|</span><div class="theme-info">主题&nbsp;<a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next" rel="external nofollow">NexT.Mist</a><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-divider">|</span> 总访问量 <span id="busuanzi_value_site_pv"></span> 次 </span><span id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-divider">|</span> 总访客 <span id="busuanzi_value_site_uv"></span> 人</span></div><div class="busuanzi-count"><script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span id="scrollpercent"><span>0</span>%</span></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.3"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.3"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script><script src="//unpkg.com/valine@1.3.7/dist/Valine.min.js"></script><script type="text/javascript">new Valine({av:AV,el:"#comments",verify:!1,notify:!1,app_id:"FC5Jijeg1meo2K2OzPYWK327-gzGzoHsz",app_key:"6A1ReY8tjhPutK00F01YbJSq",placeholder:"没有问题吗？"})</script><script type="text/javascript">function proceedsearch(){$("body").append('<div class="search-popup-overlay local-search-pop-overlay"></div>').css("overflow","hidden"),$(".search-popup-overlay").click(onPopupClose),$(".popup").toggle();var t=$("#local-search-input");t.attr("autocapitalize","none"),t.attr("autocorrect","off"),t.focus()}var isfetched=!1,isXml=!0,search_path="search.xml";0===search_path.length?search_path="search.xml":/json$/i.test(search_path)&&(isXml=!1);var path="/"+search_path,onPopupClose=function(t){$(".popup").hide(),$("#local-search-input").val(""),$(".search-result-list").remove(),$("#no-result").remove(),$(".local-search-pop-overlay").remove(),$("body").css("overflow","")},searchFunc=function(t,e,o){"use strict";$("body").append('<div class="search-popup-overlay local-search-pop-overlay"><div id="search-loading-icon"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div>').css("overflow","hidden"),$("#search-loading-icon").css("margin","20% auto 0 auto").css("text-align","center"),$.ajax({url:t,dataType:isXml?"xml":"json",async:!0,success:function(t){isfetched=!0,$(".popup").detach().appendTo(".header-inner");var n=isXml?$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get():t,r=document.getElementById(e),s=document.getElementById(o),a=function(){var t=r.value.trim().toLowerCase(),e=t.split(/[\s\-]+/);e.length>1&&e.push(t);var o=[];if(t.length>0&&n.forEach(function(n){function r(e,o,n,r){for(var s=r[r.length-1],a=s.position,i=s.word,l=[],h=0;a+i.length<=n&&0!=r.length;){i===t&&h++,l.push({position:a,length:i.length});var p=a+i.length;for(r.pop();0!=r.length&&(s=r[r.length-1],a=s.position,i=s.word,p>a);)r.pop()}return c+=h,{hits:l,start:o,end:n,searchTextCount:h}}function s(t,e){var o="",n=e.start;return e.hits.forEach(function(e){o+=t.substring(n,e.position);var r=e.position+e.length;o+='<b class="search-keyword">'+t.substring(e.position,r)+"</b>",n=r}),o+=t.substring(n,e.end)}var a=!1,i=0,c=0,l=n.title.trim(),h=l.toLowerCase(),p=n.content.trim().replace(/<[^>]+>/g,""),u=p.toLowerCase(),f=decodeURIComponent(n.url),d=[],g=[];if(""!=l&&(e.forEach(function(t){function e(t,e,o){var n=t.length;if(0===n)return[];var r=0,s=[],a=[];for(o||(e=e.toLowerCase(),t=t.toLowerCase());(s=e.indexOf(t,r))>-1;)a.push({position:s,word:t}),r=s+n;return a}d=d.concat(e(t,h,!1)),g=g.concat(e(t,u,!1))}),(d.length>0||g.length>0)&&(a=!0,i=d.length+g.length)),a){[d,g].forEach(function(t){t.sort(function(t,e){return e.position!==t.position?e.position-t.position:t.word.length-e.word.length})});var v=[];0!=d.length&&v.push(r(l,0,l.length,d));for(var $=[];0!=g.length;){var C=g[g.length-1],m=C.position,x=C.word,w=m-20,y=m+80;w<0&&(w=0),y<m+x.length&&(y=m+x.length),y>p.length&&(y=p.length),$.push(r(p,w,y,g))}$.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hits.length!==e.hits.length?e.hits.length-t.hits.length:t.start-e.start});var T=parseInt("1");T>=0&&($=$.slice(0,T));var b="";b+=0!=v.length?"<li><a href='"+f+"' class='search-result-title'>"+s(l,v[0])+"</a>":"<li><a href='"+f+"' class='search-result-title'>"+l+"</a>",$.forEach(function(t){b+="<a href='"+f+'\'><p class="search-result">'+s(p,t)+"...</p></a>"}),b+="</li>",o.push({item:b,searchTextCount:c,hitCount:i,id:o.length})}}),1===e.length&&""===e[0])s.innerHTML='<div id="no-result"><i class="fa fa-search fa-5x" /></div>';else if(0===o.length)s.innerHTML='<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>';else{o.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hitCount!==e.hitCount?e.hitCount-t.hitCount:e.id-t.id});var a='<ul class="search-result-list">';o.forEach(function(t){a+=t.item}),a+="</ul>",s.innerHTML=a}};r.addEventListener("input",a),$(".local-search-pop-overlay").remove(),$("body").css("overflow",""),proceedsearch()}})};$(".popup-trigger").click(function(t){t.stopPropagation(),isfetched===!1?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(onPopupClose),$(".popup").click(function(t){t.stopPropagation()}),$(document).on("keyup",function(t){var e=27===t.which&&$(".search-popup").is(":visible");e&&onPopupClose()})</script><script>!function(){var t=document.createElement("script"),s=window.location.protocol.split(":")[0];"https"===s?t.src="https://zz.bdstatic.com/linksubmit/push.js":t.src="http://push.zhanzhang.baidu.com/push.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()</script><script type="text/javascript" src="/js/src/js.cookie.js?v=5.1.3"></script><script type="text/javascript" src="/js/src/scroll-cookie.js?v=5.1.3"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,debug:!1,model:{scale:1,jsonPath:"/live2dw/assets/hijiki.model.json"},display:{position:"left",width:100,height:200,hOffset:0,vOffset:-20},mobile:{show:!1,motion:!0,scale:.3},log:!1})</script></body></html><!-- rebuild by neat -->