---
title: 一次排查 es-hadoop 问题的经历
id: 2020-05-15 01:40:30
date: 2018-04-28 01:40:30
updated: 2020-05-15 01:40:30
categories:
tags:
keywords:
---



2018042801

大数据技术知识
Spark,es-hadoop


<!-- more -->



es-hadoop报错

1图



2图



3图




4图


未知问题原因

未知，搜索都是环境问题

http://www.cnblogs.com/prisoner/p/4782287.html

http://blackwing.iteye.com/blog/2107107 (这个思路对了)


这个思路不错

https://www.bbsmax.com/A/xl56xPNmzr/ (这个思路对了)

顺着这个思路看下去，还真是配置问题，而根本原因是因为参数名字大写了，是错误的，以前加这个配置的原因是因为加载的文件数据太大，报错，而后并没有再跑过类似的功能，就没管它(JDK7使用 -Xss4m配置，默认是1m)



图1


这个配置去掉(或者改为 -Xss4m)

从下面抄代码的时候把错误的配置抄上去了，唉，谁写的代码

图2


去掉后Spark任务正常跑通，Web界面全部task成功，但是driver后台日志报错，但这并没有影响Spark任务的功能


参考，不知道为什么 http://www.iteye.com/problems/100346



以前加载大文本文件到Map中，大概是这种错误


参数配置说明图


才想到去改了 -Xss4m配置，默认是1m



总结：这种错误没给正常的异常信息和代码引导(当然，如果熟悉源码肯定就很容易找到原因了)，导致我都不知道去哪里找原因，浪费了大量时间和精力，觉得人生充满了绝望


