<!-- build time:Sat Mar 28 2020 23:31:34 GMT+0800 (China Standard Time) --><!DOCTYPE html><html class="theme-next mist use-motion" lang="zh-Hans"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#222"><script src="/lib/pace/pace.min.js?v=1.0.2"></script><link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-240x240-playpi.png?v=5.1.3"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-playpi.png?v=5.1.3"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-playpi.png?v=5.1.3"><link rel="mask-icon" href="/images/logo-playpi.svg?v=5.1.3" color="#222"><meta name="keywords" content="Hadoop,Zokkeeper,入门到精通,Hadoop 入门,HDFS,MapReduce"><link rel="alternate" href="/atom.xml" title="虾丸派" type="application/atom+xml"><meta name="description" content="今天是愚人节，可以说是个好日子，也可以说是个坏日子。那我就选择从今天开始整理 Hadoop 入门系列 的博客内容，给自己开个玩笑，同时也给自己定一个目标，看看自己能不能坚持写下去。本文是这一系列博客内容的第零篇： 初识 Hadoop，会讲一些关于 Hadoop 的基础概念以及基本知识点，不需要技术基础，也不需要手动操作，能看懂就行。"><meta name="keywords" content="Hadoop,Zokkeeper,入门到精通,Hadoop 入门,HDFS,MapReduce"><meta property="og:type" content="article"><meta property="og:title" content="Hadoop 入门系列 0-- 初识 Hadoop"><meta property="og:url" content="https://www.playpi.org/2017040101.html"><meta property="og:site_name" content="虾丸派"><meta property="og:description" content="今天是愚人节，可以说是个好日子，也可以说是个坏日子。那我就选择从今天开始整理 Hadoop 入门系列 的博客内容，给自己开个玩笑，同时也给自己定一个目标，看看自己能不能坚持写下去。本文是这一系列博客内容的第零篇： 初识 Hadoop，会讲一些关于 Hadoop 的基础概念以及基本知识点，不需要技术基础，也不需要手动操作，能看懂就行。"><meta property="og:locale" content="zh-Hans"><meta property="og:image" content="https://raw.githubusercontent.com/iplaypi/img-playpi/master/img/2017/20190812004101.jpg"><meta property="og:image" content="https://raw.githubusercontent.com/iplaypi/img-playpi/master/img/2017/20190812004121.jpg"><meta property="og:image" content="https://raw.githubusercontent.com/iplaypi/img-playpi/master/img/2017/20190812004034.png"><meta property="og:image" content="https://raw.githubusercontent.com/iplaypi/img-playpi/master/img/2017/20190812003816.jpg"><meta property="og:image" content="https://raw.githubusercontent.com/iplaypi/img-playpi/master/img/2017/20190812003754.jpg"><meta property="og:image" content="https://raw.githubusercontent.com/iplaypi/img-playpi/master/img/2017/20190812003731.png"><meta property="og:image" content="https://raw.githubusercontent.com/iplaypi/img-playpi/master/img/2017/20190813000921.png"><meta property="og:updated_time" content="2018-11-21T07:58:54.000Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Hadoop 入门系列 0-- 初识 Hadoop"><meta name="twitter:description" content="今天是愚人节，可以说是个好日子，也可以说是个坏日子。那我就选择从今天开始整理 Hadoop 入门系列 的博客内容，给自己开个玩笑，同时也给自己定一个目标，看看自己能不能坚持写下去。本文是这一系列博客内容的第零篇： 初识 Hadoop，会讲一些关于 Hadoop 的基础概念以及基本知识点，不需要技术基础，也不需要手动操作，能看懂就行。"><meta name="twitter:image" content="https://raw.githubusercontent.com/iplaypi/img-playpi/master/img/2017/20190812004101.jpg"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Mist",version:"5.1.3",sidebar:{position:"left",display:"hide",offset:12,b2t:!1,scrollpercent:!0,onmobile:!1},fancybox:!0,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},duoshuo:{userId:"0",author:"博主"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="https://www.playpi.org/2017040101.html"><title>Hadoop 入门系列 0-- 初识 Hadoop | 虾丸派</title></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">虾丸派</span> <span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">烂笔头</h1></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于</a></li><li class="menu-item menu-item-books"><a href="/books/" rel="section"><i class="menu-item-icon fa fa-fw fa-book"></i><br>书籍</a></li><li class="menu-item menu-item-guide"><a href="/guide/" rel="section"><i class="menu-item-icon fa fa-fw fa-location-arrow"></i><br>指南</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i> </span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"><input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.playpi.org/2017040101.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="虾丸派"><meta itemprop="description" content="记录知识 | 分享技术"><meta itemprop="image" content="/images/favicon-1536x1536-playpi.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="虾丸派"></span><header class="post-header"><h2 class="post-title" itemprop="name headline">Hadoop 入门系列 0-- 初识 Hadoop</h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-01T15:58:54+08:00">2017-04-01 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/series-of-hadoop/" itemprop="url" rel="index"><span itemprop="name">Hadoop 从零基础到入门系列</span> </a></span></span><span id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-divider">|</span> 阅读次数 <span id="busuanzi_value_page_pv"></span></span><div class="post-wordcount"><span class="post-meta-item-text">字数统计</span> <span title="字数统计">3,252字 </span><span class="post-meta-divider">|</span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span title="阅读时长">12分钟</span></div></div></header><div class="post-body" itemprop="articleBody"><p>今天是愚人节，可以说是个好日子，也可以说是个坏日子。那我就选择从今天开始整理 <strong>Hadoop 入门系列 </strong>的博客内容，给自己开个玩笑，同时也给自己定一个目标，看看自己能不能坚持写下去。本文是这一系列博客内容的第零篇：<strong> 初识 Hadoop</strong>，会讲一些关于 <code>Hadoop</code> 的基础概念以及基本知识点，不需要技术基础，也不需要手动操作，能看懂就行。</p><a id="more"></a><p>首先声明，以下内容基于 <code>Hadoop v1.x</code> 讲解，不存在 <code>HA（High Availability，高可用）</code> 的概念，了解 <code>v1.x</code> 的基础概念后，才能更好的继续学习 <code>v2.x、v3.x</code> 的内容。由于 <code>Hadoop</code> 的 <code>v2.x、v3.x</code> 与 <code>v1.x</code> 的版本差异比较大，更为复杂，一些概念一开始难以理解，所以采用这种由易入难的方式能循序渐进，有利于初学者、零基础者。</p><h1 id="入门概念"><a href="# 入门概念" class="headerlink" title="入门概念"></a>入门概念</h1><p>首先需要了解，<code>Hadoop</code> 是什么？简单来说，<code>Hadoop</code> 是适合大数据的 <strong>分布式存储平台 </strong>与 <strong>分布式计算平台 </strong>，包含两个核心组件，即 <code>HDFS</code> 与 <code>MapReduce</code>。其中，<code>HDFS</code> 的全称是 <code>Hadoop Distributed File System</code>，表示一种 <strong>分布式文件系统 </strong>，<code>MapReduce</code> 表示一种 <strong>并行计算框架 </strong>。</p><p>它的创始人是 <code>Doug Cutting</code>，现在是 <code>Cloudera</code> 的首席架构师。</p><p>再说一下关于 <code>Hadoop</code> 这个名字的趣事，<code>Hadoop</code> 的发音是 <code>hædu:p</code>，它的来源是这样的：<code>Doug Cutting</code> 的儿子在牙牙学语时，抱着一个黄色的小象玩偶，嘴里发出类似于 <code>hædu:p</code> 的发音，<code>Doug Cutting</code> 灵光闪现，就把当时正在开发的项目命名为 <code>Hadoop</code>。</p><p>所以，这个名字不是一个缩写，也不是一个单词，它是一个虚构的名字。该项目的创建者，<code>Doug Cutting</code> 如此解释 <code>Hadoop</code> 的命名：首先它是我的孩子在玩耍时发出的声音，而我的命名标准就是简短、容易发音、拼写，小孩子都能发出来，就说明选对了。众所周知，给软件命名不是件太容易的事，要尽量找没有被使用过、没有带有特殊意义的词、不会被用于别处，否则把它写进了程序就可能会影响编程。</p><p><code>Hadoop</code> 的版本发布有两种：</p><ul><li><code>Apache</code> 开源版本，官方版本</li><li><code>Cloudera</code> 公司维护的打补丁版本，稳定、有商业支持，下载使用比较多</li></ul><h1 id="HDFS- 基础知识"><a href="#HDFS- 基础知识" class="headerlink" title="HDFS 基础知识"></a>HDFS 基础知识</h1><p><code>HDFS</code> 是基于 <code>Google</code> 的论文 <code>The Google File System</code> 而开发实现的。</p><h2 id="文件结构"><a href="# 文件结构" class="headerlink" title="文件结构"></a> 文件结构</h2><p><code>HDFS</code> 中的文件有自己独特的存储方式，一个文件会被划分为大小固定的多个文件块，称之为 <code>block</code>，分布存储在集群中的多个数据节点上，每个文件块的大小默认为 <code>64MB</code>【在 v1.x 中是这个默认值，在 v2.x 默认是 128MB】。</p><p>文件块的大小参数如下，单位是字节【134217728B 即 128MB】：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;property&gt; </span><br><span class="line">  &lt;name&gt;dfs.blocksize&lt;/name&gt;  </span><br><span class="line">  &lt;value&gt;134217728&lt;/value&gt; </span><br><span class="line">&lt;/property&gt;</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/iplaypi/img-playpi/master/img/2017/20190812004101.jpg" alt="文件块参数设置" title="文件块参数设置"></p><p>关于这个文件块参数的解释说明：</p><blockquote><p>The default block size for new files, in bytes. You can use the following suffix (case insensitive): k (kilo), m (mega), g (giga), t (tera), p (peta), e (exa) to specify the size (such as 128k, 512m, 1g, etc.), Or provide complete size in bytes (such as 134217728 for 128 MB).</p></blockquote><p>参考官网：<a href="http://hadoop.apache.org/docs/stable/hadoop-project-dist/hadoop-hdfs/hdfs-default.xml" target="_blank" rel="noopener">hdfs-default.xml</a> 。</p><p><img src="https://raw.githubusercontent.com/iplaypi/img-playpi/master/img/2017/20190812004121.jpg" alt="文件块参数解释说明" title="文件块参数解释说明"></p><h2 id="副本概念"><a href="# 副本概念" class="headerlink" title="副本概念"></a>副本概念</h2><p>同时，为了保证数据文件安全，避免丢失，同一个文件块在不同的数据节点中有多个副本。</p><p><code>HDFS</code> 设置副本数的参数是在 <code>hdfs-site.xml</code> 配置文件中，默认为 3，在一般场景下都是可以保证数据安全的。如果觉得浪费资源可以设置为 2，但是磁盘的价格是不贵的，多一份可以保障数据更加安全，当然，太多了也没有必要，会造成磁盘的浪费。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;property&gt;</span><br><span class="line">  &lt;name&gt;dfs.replication&lt;/name&gt;</span><br><span class="line">  &lt;value&gt;3&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/iplaypi/img-playpi/master/img/2017/20190812004034.png" alt="副本数参数设置" title="副本数参数设置"></p><p>注意，<code>HDFS</code> 中的副本参数的概念不是中文语境下的复制次数，而是总的数量，例如把 <strong>dfs.replication</strong> 设置为 3，虽然翻译为副本数为 3，其实表示的总共有 3 份数据【主本 1 份 + 副本 2 份】。</p><p>注意，如果按照中文语境下的含义来解释，副本数应该是 2，加上主本一共有 3 份数据，这看起来有歧义，也会令人疑惑。它不像在 <code>Elastisearch</code> 中设置副本的参数 <strong>number_of_replicas</strong>，表示的就是副本数，如果想保存总共 3 份数据，需要把 <strong>number_of_replicas</strong> 设置为 2 。下图中此参数的值设置为 1，即副本为 1，表示总共保存 2 份数据。</p><p><img src="https://raw.githubusercontent.com/iplaypi/img-playpi/master/img/2017/20190812003816.jpg" alt="Elastisearch 设置副本数" title="Elastisearch 设置副本数"></p><h2 id="文件系统"><a href="# 文件系统" class="headerlink" title="文件系统"></a>文件系统</h2><p>到了这里，我们会思考，文件结构好像还有点复杂，那么 <code>HDFS</code> 是怎么管理这些文件的呢？这是接下来的重点。</p><p><code>HDFS</code> 这个分布式文件系统遵循 <strong>主从结构 </strong>，有一个主节点，称之为 <code>NameNode</code>【NN，管理节点】，有多个从节点，称之为 <code>DataNode</code>【DN，数据节点】。</p><p>它们各自的作用如下。</p><p><code>NameNode</code> 节点的作用：</p><ul><li>接收客户端的请求</li><li>维护分布式文件系统的目录结构</li><li>管理文件与 <code>block</code> 之间的关系，管理 <code>block</code> 与 <code>DataNode</code> 节点之间的关系</li></ul><p><code>DataNode</code> 节点的作用：</p><ul><li>真正存储文件</li><li>文件被分成文件块存储到磁盘上，文件块默认大小为 64MB，可以配置</li><li>为了保证数据安全，文件会被有多个副本，即备份，默认值为 3</li></ul><h2 id="问题思考"><a href="# 问题思考" class="headerlink" title="问题思考"></a>问题思考</h2><p>1、如果从客户端上传一个文件，大小为 128MB，会有多少个文件块？</p><p>答：根据文件块的大小，此时应该有 2 个文件块，但是由于副本的存在，总计是 6 个文件块。</p><p>2、如果从客户端上传一个文件，大小为 65MB，会有多少个文件块？</p><p>答：此时有 2 个块，一个块大小是 64MB，一个块大小是 1MB，后者占用的真实存储空间也是 1MB，并不是 64MB。副本也是同样的大小。</p><p>3、如果从客户端再上传一个大小为 24MB 的文件，那么这个文件块会与 2 中的那个 1MB 的文件块进行合并吗？</p><p>答：不会，文件块不会合并，它只是一个逻辑概念，实际占用的存储空间是以文件大小为准的。所以这个 24MB 的文件上传后是一个独立的文件块，占用存储空间大小为 24MB。</p><p>那么有读者可能会疑惑，既然是这样，那这个文件块有什么必要，它的作用是什么？请看 <code>Hadoop Community</code> 的解释说明：</p><blockquote><p>The block size is a meta attribute. If you append tothe file later, it still needs to know when to split further - so it keeps that value as a mere metadata it can use to advise itself on write boundaries.</p></blockquote><p>可见，文件块的概念是一种 <strong>元数据 </strong>信息，这种概念在很多大数据框架中都能见到，它可以在追加文件时合理地给文件分块【随着对 <code>HDFS</code> 的深入理解，后面的博客内容还会解释文件块的合理性】。</p><p>此外，使用 <code>hdfs fsck</code> 命令【也可以使用已经被废弃的 hadoop fsck】可以查看 <code>HDFS</code> 文件的详细信息。</p><p><img src="https://raw.githubusercontent.com/iplaypi/img-playpi/master/img/2017/20190812003754.jpg" alt="查看文件详细信息" title="查看文件详细信息"></p><p>这里需要看两个重点内容：<code>Total size:24135B</code>、<code>Total blocks (validated):22 (avg. block size 1097B)</code>，其中，前者表示文件的总大小，总计 24135B，后者表示文件块的个数，有 22 个。但是留意一下最后还有一个备注信息 ：<code>avg. block size 1097B</code>，看起来像是文件块的大小【元数据】，其实不是，它是单个文件的平均大小【文件真实大小】，乘以 22 就等于前面的文件总大小。</p><p>关于这一点，<code>Hadoop Community</code> 也给出过解释说明：</p><blockquote><p>The fsck is showing you an “average blocksize”, not the block size metadata attribute of the file like stat shows. In this specific case, the average is just the length of your file, which is lesser than one whole block.</p></blockquote><p>此外，从上图中还可以看到文件的 <strong>备份数 </strong>、<strong> 机架数 </strong>等信息。</p><h2 id="副本存放策略"><a href="# 副本存放策略" class="headerlink" title="副本存放策略"></a>副本存放策略</h2><p>副本的存放策略在不同版本之间存在差异，主要是很久之前的低版本与现在的版本有差异，主要版本分界点在 <code>v0.17</code>，下面就以默认的三份副本数为例描述副本的存放策略【如果有更多的副本数，参见 <strong>其它副本 </strong>的描述】。</p><p><code>v0.17</code> 之前【不包含 v0.17】：</p><ul><li>副本一：同 <code>Client</code> 一个机架的不同 <code>DataNode</code> 节点</li><li>副本二：同 <code>Client</code> 一个机架的另一个 <code>DataNode</code> 节点</li><li>副本三：不同 <code>Client</code> 机架的另一个 <code>DataNode</code> 节点</li><li>其它副本：随机挑选</li></ul><p><code>v0.17</code> 之后【包含 v0.17】：</p><ul><li>副本一：同 <code>Client</code> 的 <code>DataNode</code> 节点</li><li>副本二：不同 <code>Client</code> 机架的一个 <code>DataNode</code> 节点</li><li>副本三：同副本二的机架中的另一个 <code>DataNode</code> 节点</li><li>其它副本：随机选择</li></ul><p>这种副本存放策略有利于数据的安全，就算有的 <code>DataNode</code> 节点出问题，也不会引起数据丢失，哪怕事故很严重【例如某个交换机损坏】，导致整个机架的 <code>DataNode</code> 节点都出问题，也不会引起数据丢失，这也是副本设置为三份的好处。</p><h2 id="机架知识"><a href="# 机架知识" class="headerlink" title="机架知识"></a>机架知识</h2><p>上文的 <strong>副本存放策略 </strong>中出现了一个名词：<strong> 机架 </strong>【Rack】，下面使用文字与图片简单描述一下 <strong>机架 </strong>的概念，免不了还会涉及到 <strong>主机 </strong>【服务器】、<strong> 交换机 </strong>、<strong> 机柜 </strong>的概念。</p><p>主机：物理概念，就是一台服务器，永远在运行。</p><p>机柜：物理概念，有序存放主机的一个柜子，为了合理利用空间，一个机柜中可以存放多台主机。</p><p>交换机：物理概念，连接多台主机的设备，用来给不同主机之间通信使用，一般有连接数量限制，要看交换机上面有多少个网口。</p><p>机架：逻辑概念，使用一台交换机连接的所有主机以及机柜构成了一个机架，一个机架可以包含多个机柜、多台主机。</p><p>下面给出一个简单的示意图：</p><p><img src="https://raw.githubusercontent.com/iplaypi/img-playpi/master/img/2017/20190812003731.png" alt="机架示意图" title="机架示意图"></p><h1 id="MapReduce- 基础知识"><a href="#MapReduce- 基础知识" class="headerlink" title="MapReduce 基础知识"></a>MapReduce 基础知识</h1><p><code>MapReduce</code> 是基于 <code>Google</code> 的论文 <code>Simplified Data Proceessing on Large Clusters</code> 而开发实现的。</p><h2 id="基本概念"><a href="# 基本概念" class="headerlink" title="基本概念"></a> 基本概念</h2><p><code>MapReduce</code> 是一种编程模型，具体实现后是一种并行计算框架，用于大规模数据集的并行计算，过程可以拆分为： <code>Map</code>、<code>Reduce</code>，它是分布式计算的利器，采用分而治之的思维，节约内存【速度比较慢】，并行计算，适合海量数据的处理。</p><p>其它的计算框架都采用了类似的思想，理解了 <code>MapReduce</code> 就更容易在以后的时间学习其它的框架，例如 <strong>Spark</strong>、<strong>Hive</strong>、<strong>HBase</strong>。</p><h2 id="场景举例"><a href="# 场景举例" class="headerlink" title="场景举例"></a>场景举例</h2><p>例如当前有一个文本文件，每行有一个数字，求出所有数字中最大的那个，需要分别考虑文件大小为 1MB、1GB、1TB 等情况。</p><p>如果文件比较小，可以随便读取文件的内容加载到内存中，然后遍历元素，进行简单判断，保留最大的那个数字即可。但是，当文本文件非常大的时候，是不可能加载到内存中的，此时需要采用基础算法中的一种常用思想：<strong> 分而治之 </strong>，即把文本文件拆分为很小的多份文本文件，分别计算最大的数字，最后再汇总，汇总后数据量已经小了很多，最终再计算即可得出想要的结果。</p><p>可以从下图看出这种简单的思路过程，比较符合人类自然的思考过程：</p><p><img src="https://raw.githubusercontent.com/iplaypi/img-playpi/master/img/2017/20190813000921.png" alt="MapReduce 示意图" title="MapReduce 示意图"></p><p>当然，这种方式必然牺牲了时间，拆分文件越多越耗时，但是却节约了空间，不用很大的内存也可以处理海量的数据，这就是 <code>MapReduce</code> 的核心思想。</p><h2 id="主从架构"><a href="# 主从架构" class="headerlink" title="主从架构"></a>主从架构</h2><p>和 <code>HDFS</code> 一样，<code>MapReduce</code> 也是 <strong>主从架构 </strong>，两种节点分别为 <code>JobTracker</code>、<code>TaskTracker</code>，前者称之为主节点【管理节点】，只有一个，后者称之为从节点【计算节点】，可以有多个。</p><p>下面总结一下主节点、从节点各自的作用，读者可以与 <code>HDFS</code> 中的 <code>NameNode</code>、<code>DataNode</code> 的作用对比一下。</p><p><code>JobTracker</code> 的作用：</p><ul><li>接收客户端提交的计算任务</li><li>把计算任务分配给 <code>TaskTracker</code> 执行</li><li>监控 <code>TaskTracker</code> 的执行情况</li></ul><p><code>TaskTracker</code> 的作用：</p><ul><li>执行 <code>JobTracker</code> 分配过来的计算任务</li><li>向 <code>JobTracker</code> 汇报任务的执行情况</li></ul><p>读者可以思考一下，这种架构是不是很像生活中的领导与员工的关系，或者更为具体一些，像是产品经理与工程师之间的关系，一个人负责接收需求、分配任务、监督执行情况，另外一群人负责具体实现，并定时汇报进度。</p></div><div><div id="wechat_subscriber" style="display:block;padding:10px 0;margin:20px auto;width:100%;text-align:center"><img id="wechat_subscriber_qcode" src="/images/wechat-qr-personal.jpg" alt="虾丸派 wechat" style="width:200px;max-width:100%"><div>扫一扫添加博主，进技术交流群，共同学习进步</div></div></div><div><div style="padding:10px 0;margin:20px auto;width:90%;text-align:center"><div>永不止步</div><button id="rewardButton" disable="enable" onclick='var e=document.getElementById("QR");"none"===e.style.display?e.style.display="block":e.style.display="none"'><span>打赏</span></button><div id="QR" style="display:none"><div id="wechat" style="display:inline-block"><img id="wechat_qr" src="/images/wechat-pay-playpi.png" alt="虾丸派 微信支付"><p>微信支付</p></div></div></div></div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong> 虾丸派</li><li class="post-copyright-link"><strong>本文链接：</strong> <a href="https://www.playpi.org/2017040101.html" title="Hadoop 入门系列 0-- 初识 Hadoop">https://www.playpi.org/2017040101.html</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！</li></ul></div><footer class="post-footer"><div class="post-tags"><a href="/tags/Hadoop/" rel="tag"><i class="fa fa-tag"></i> Hadoop</a> <a href="/tags/HDFS/" rel="tag"><i class="fa fa-tag"></i> HDFS</a> <a href="/tags/Zookeeper/" rel="tag"><i class="fa fa-tag"></i> Zookeeper</a> <a href="/tags/MapReduce/" rel="tag"><i class="fa fa-tag"></i> MapReduce</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2017030301.html" rel="next" title="Redis Desktop Manager 的安装及使用"><i class="fa fa-chevron-left"></i> Redis Desktop Manager 的安装及使用</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/2017042201.html" rel="prev" title="解决 IDEA 无法创建子包的问题">解决 IDEA 无法创建子包的问题 <i class="fa fa-chevron-right"></i></a></div></div></footer></div></article><div class="post-spread"></div></div></div><div class="comments" id="comments"><div id="vcomments"></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">站点概览</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="/images/favicon-1536x1536-playpi.png" alt="虾丸派"><p class="site-author-name" itemprop="name">虾丸派</p><p class="site-description motion-element" itemprop="description">记录知识 | 分享技术</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">136</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/index.html"><span class="site-state-item-count">12</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/index.html"><span class="site-state-item-count">284</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/iplaypi" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i>GitHub</a> </span><span class="links-of-author-item"><a href="https://weibo.com/u/3086148515" target="_blank" title="微博"><i class="fa fa-fw fa-weibo"></i>微博</a> </span><span class="links-of-author-item"><a href="mailto:playpi@qq.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-envelope"></i>E-Mail</a></span></div><div class="cc-license motion-element" itemprop="license"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" target="_blank" rel="external nofollow"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a></div><div class="links-of-blogroll motion-element links-of-blogroll-inline"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-link"></i> 友情链接</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="https://github.com/iplaypi" title="GitHub" target="_blank" rel="external nofollow">GitHub</a></li><li class="links-of-blogroll-item"><a href="https://weibo.com/u/3086148515" title="Weibo" target="_blank" rel="external nofollow">Weibo</a></li><li class="links-of-blogroll-item"><a href="https://www.playpi.org" title="虾丸派" target="_blank" rel="external nofollow">虾丸派</a></li><li class="links-of-blogroll-item"><a href="https://www.playpi.org" title="playpi" target="_blank" rel="external nofollow">playpi</a></li><li class="links-of-blogroll-item"><a href="https://www.liaoxuefeng.com" title="廖雪峰" target="_blank" rel="external nofollow">廖雪峰</a></li><li class="links-of-blogroll-item"><a href="http://www.ruanyifeng.com" title="阮一峰" target="_blank" rel="external nofollow">阮一峰</a></li><li class="links-of-blogroll-item"><a href="https://travis-ci.org/iplaypi/iplaypi.github.io" title="travis-ci" target="_blank" rel="external nofollow">travis-ci</a></li><li class="links-of-blogroll-item"><a href="https://www.vultr.com/?ref=7861302-4F" title="Vultr" target="_blank" rel="external nofollow">Vultr</a></li></ul></div></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#入门概念"><span class="nav-number">1.</span> <span class="nav-text">入门概念</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#HDFS- 基础知识"><span class="nav-number">2.</span> <span class="nav-text">HDFS 基础知识</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#文件结构"><span class="nav-number">2.1.</span> <span class="nav-text">文件结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#副本概念"><span class="nav-number">2.2.</span> <span class="nav-text">副本概念</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文件系统"><span class="nav-number">2.3.</span> <span class="nav-text">文件系统</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#问题思考"><span class="nav-number">2.4.</span> <span class="nav-text">问题思考</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#副本存放策略"><span class="nav-number">2.5.</span> <span class="nav-text">副本存放策略</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#机架知识"><span class="nav-number">2.6.</span> <span class="nav-text">机架知识</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MapReduce- 基础知识"><span class="nav-number">3.</span> <span class="nav-text">MapReduce 基础知识</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#基本概念"><span class="nav-number">3.1.</span> <span class="nav-text">基本概念</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#场景举例"><span class="nav-number">3.2.</span> <span class="nav-text">场景举例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#主从架构"><span class="nav-number">3.3.</span> <span class="nav-text">主从架构</span></a></li></ol></li></ol></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; 2016&ndash;<span itemprop="copyrightYear">2020</span> <span class="post-meta-divider">|</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">虾丸派</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-area-chart"></i> </span><span class="post-meta-item-text">全站字数统计</span> <span title="全站字数统计">302.3k 字</span></div><div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io" rel="external nofollow">Hexo</a> 强力驱动</div><span class="post-meta-divider">|</span><div class="theme-info">主题&nbsp;<a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next" rel="external nofollow">NexT.Mist</a><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-divider">|</span> 总访问量 <span id="busuanzi_value_site_pv"></span> 次 </span><span id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-divider">|</span> 总访客 <span id="busuanzi_value_site_uv"></span> 人</span></div><div class="busuanzi-count"><script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span id="scrollpercent"><span>0</span>%</span></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.3"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.3"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script><script src="//unpkg.com/valine@1.3.7/dist/Valine.min.js"></script><script type="text/javascript">new Valine({av:AV,el:"#comments",verify:!1,notify:!1,app_id:"FC5Jijeg1meo2K2OzPYWK327-gzGzoHsz",app_key:"6A1ReY8tjhPutK00F01YbJSq",placeholder:"没有问题吗？"})</script><script type="text/javascript">function proceedsearch(){$("body").append('<div class="search-popup-overlay local-search-pop-overlay"></div>').css("overflow","hidden"),$(".search-popup-overlay").click(onPopupClose),$(".popup").toggle();var t=$("#local-search-input");t.attr("autocapitalize","none"),t.attr("autocorrect","off"),t.focus()}var isfetched=!1,isXml=!0,search_path="search.xml";0===search_path.length?search_path="search.xml":/json$/i.test(search_path)&&(isXml=!1);var path="/"+search_path,onPopupClose=function(t){$(".popup").hide(),$("#local-search-input").val(""),$(".search-result-list").remove(),$("#no-result").remove(),$(".local-search-pop-overlay").remove(),$("body").css("overflow","")},searchFunc=function(t,e,o){"use strict";$("body").append('<div class="search-popup-overlay local-search-pop-overlay"><div id="search-loading-icon"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div>').css("overflow","hidden"),$("#search-loading-icon").css("margin","20% auto 0 auto").css("text-align","center"),$.ajax({url:t,dataType:isXml?"xml":"json",async:!0,success:function(t){isfetched=!0,$(".popup").detach().appendTo(".header-inner");var n=isXml?$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get():t,r=document.getElementById(e),s=document.getElementById(o),a=function(){var t=r.value.trim().toLowerCase(),e=t.split(/[\s\-]+/);e.length>1&&e.push(t);var o=[];if(t.length>0&&n.forEach(function(n){function r(e,o,n,r){for(var s=r[r.length-1],a=s.position,i=s.word,l=[],h=0;a+i.length<=n&&0!=r.length;){i===t&&h++,l.push({position:a,length:i.length});var p=a+i.length;for(r.pop();0!=r.length&&(s=r[r.length-1],a=s.position,i=s.word,p>a);)r.pop()}return c+=h,{hits:l,start:o,end:n,searchTextCount:h}}function s(t,e){var o="",n=e.start;return e.hits.forEach(function(e){o+=t.substring(n,e.position);var r=e.position+e.length;o+='<b class="search-keyword">'+t.substring(e.position,r)+"</b>",n=r}),o+=t.substring(n,e.end)}var a=!1,i=0,c=0,l=n.title.trim(),h=l.toLowerCase(),p=n.content.trim().replace(/<[^>]+>/g,""),u=p.toLowerCase(),f=decodeURIComponent(n.url),d=[],g=[];if(""!=l&&(e.forEach(function(t){function e(t,e,o){var n=t.length;if(0===n)return[];var r=0,s=[],a=[];for(o||(e=e.toLowerCase(),t=t.toLowerCase());(s=e.indexOf(t,r))>-1;)a.push({position:s,word:t}),r=s+n;return a}d=d.concat(e(t,h,!1)),g=g.concat(e(t,u,!1))}),(d.length>0||g.length>0)&&(a=!0,i=d.length+g.length)),a){[d,g].forEach(function(t){t.sort(function(t,e){return e.position!==t.position?e.position-t.position:t.word.length-e.word.length})});var v=[];0!=d.length&&v.push(r(l,0,l.length,d));for(var $=[];0!=g.length;){var C=g[g.length-1],m=C.position,x=C.word,w=m-20,y=m+80;w<0&&(w=0),y<m+x.length&&(y=m+x.length),y>p.length&&(y=p.length),$.push(r(p,w,y,g))}$.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hits.length!==e.hits.length?e.hits.length-t.hits.length:t.start-e.start});var T=parseInt("1");T>=0&&($=$.slice(0,T));var b="";b+=0!=v.length?"<li><a href='"+f+"' class='search-result-title'>"+s(l,v[0])+"</a>":"<li><a href='"+f+"' class='search-result-title'>"+l+"</a>",$.forEach(function(t){b+="<a href='"+f+'\'><p class="search-result">'+s(p,t)+"...</p></a>"}),b+="</li>",o.push({item:b,searchTextCount:c,hitCount:i,id:o.length})}}),1===e.length&&""===e[0])s.innerHTML='<div id="no-result"><i class="fa fa-search fa-5x" /></div>';else if(0===o.length)s.innerHTML='<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>';else{o.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hitCount!==e.hitCount?e.hitCount-t.hitCount:e.id-t.id});var a='<ul class="search-result-list">';o.forEach(function(t){a+=t.item}),a+="</ul>",s.innerHTML=a}};r.addEventListener("input",a),$(".local-search-pop-overlay").remove(),$("body").css("overflow",""),proceedsearch()}})};$(".popup-trigger").click(function(t){t.stopPropagation(),isfetched===!1?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(onPopupClose),$(".popup").click(function(t){t.stopPropagation()}),$(document).on("keyup",function(t){var e=27===t.which&&$(".search-popup").is(":visible");e&&onPopupClose()})</script><script>!function(){var t=document.createElement("script"),s=window.location.protocol.split(":")[0];"https"===s?t.src="https://zz.bdstatic.com/linksubmit/push.js":t.src="http://push.zhanzhang.baidu.com/push.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()</script><script type="text/javascript" src="/js/src/js.cookie.js?v=5.1.3"></script><script type="text/javascript" src="/js/src/scroll-cookie.js?v=5.1.3"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,debug:!1,model:{scale:1,jsonPath:"/live2dw/assets/hijiki.model.json"},display:{position:"left",width:100,height:200,hOffset:0,vOffset:-20},mobile:{show:!1,motion:!0,scale:.3},log:!1})</script></body></html><!-- rebuild by neat -->